require 'spec_helper'

describe "organizations/index.html.erb" do
  org1 = nil
  org2 = nil

  before(:each) do
    org1 = stub_model(Organization,{:name => 'test', :address => "12 pinner rd", :telephone => "1234"})
    org2 = stub_model(Organization,{:name => 'test', :address => "12 oxford rd", :telephone => "3446"})
    assign(:organizations, [ 
      org1,
      org2
    ])
  end

  it "renders a search form" do
    render
    rendered.should have_selector "form input[name='q']"
    rendered.should have_selector "form input[type='submit']"
  end

  it "does not renders addresses and telephone numbers" do
    render
    rendered.should_not have_content org1.address
    rendered.should_not have_content org1.telephone
    rendered.should_not have_content org2.address
    rendered.should_not have_content org2.telephone
  end


    
end
